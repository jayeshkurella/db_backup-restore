<nav class="navbar navbar-expand-lg navbar-custom">
  <div class="container-fluid d-flex justify-content-between align-items-center">
    <!-- Logo -->
    <a class="navbar-brand d-flex align-items-center" href="#">
      <img src="assets/images/Chhaya.png" alt="Logo" class="navbar-logo" />
    </a>


    <!-- Right Section with User Icon -->
    <div class="d-flex align-items-center">
      <a class="text-dark">
        <i class="bi bi-person-circle user-icon" (click)="onNavigate()"></i>
      </a>
    </div>
  </div>
</nav>


<div *ngIf="isLoading" class="loader-overlay">
  <div class="loader"></div>
</div>


<div class="container-fluid" style="background-color: #f9fafc;">
  <!-- cards -->
  <div class="my-2 row" style="padding-top: 20px;">
    
    <div class="col-12 col-md-6 col-lg-4  mb-2">
      <div class="card  card-colour" style="background-color: white; background-size: cover; background-position: center; animation: backgroundAnimation 3s ease-in-out infinite;">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <h5 class="card-title" style="font-size:18px;  color: #000000;">Missing Persons</h5>
            <span style="font-size: 25px; font-weight: bold; color: #ff00fb;"><i class="bi bi-people"></i></span>
          </div>
          <h3 class="card-number" style="font-weight: bold; color: #000000;">{{ missingPersontotalcount || 0 }}</h3>
          <div class="progress" style="height: 10px; border-radius: 5px;">
            <div class="progress-bar" role="progressbar" [style.width]="((missingPersonGenderCountss.Female || 0) / (missingPersontotalcount || 1) * 100) + '%'" [style.backgroundColor]="'#a31e98'" style="margin-right: 3px; border-radius: 5px;"></div> <!-- Coral for Female -->
            <div class="progress-bar" role="progressbar" [style.width]="((missingPersonGenderCountss.Male || 0) / (missingPersontotalcount || 1) * 100) + '%'" [style.backgroundColor]="'#ff60f2'" style="margin-right: 3px; border-radius: 5px;"></div> <!-- Soft Blue for Male -->
            <div class="progress-bar" role="progressbar" [style.width]="((missingPersonGenderCountss.Other || 0) / (missingPersontotalcount || 1) * 100) + '%'" [style.backgroundColor]="'#8E44AD'" style="border-radius: 5px;"></div> <!-- Purple for Other -->
          </div>
          <div class="d-flex justify-content-between mt-2">
            <div>
              <h6 class="text-dark mb-0" style=" font-weight: bold; color: #a31e98;">{{ missingPersonGenderCountss.Female || 0 }}</h6>
              <small class="text-muted" style=" font-size: 0.875rem; color: #000000;">
                {{ ((missingPersonGenderCountss.Female || 0) / (missingPersontotalcount || 1) * 100).toFixed(1) }}% Female
              </small>
            </div>
            <div>
              <h6 class=" mb-0" style="font-weight: bold; color: #ff60f2;">{{ missingPersonGenderCountss.Male || 0 }}</h6>
              <small class="text-muted" style=" font-size: 0.875rem; color: #ff60f2;">
                {{ ((missingPersonGenderCountss.Male || 0) / (missingPersontotalcount || 1) * 100).toFixed(1) }}% Male
              </small>
            </div>
            <div>
              <h6 class=" mb-0" style=" font-weight: bold; color: #3f1f4d;">{{ missingPersonGenderCountss.Other || 0 }}</h6>
              <small class="text-muted" style=" font-size: 0.875rem; color: #000000;">
                {{ ((missingPersonGenderCountss.Other || 0) / (missingPersontotalcount || 1) * 100).toFixed(1) }}% Other
              </small>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Card 3 -->
    <div class="col-12 col-md-6 col-lg-4 mb-2">
      <div class="card  card-colour" style="background-color: white; background-size: cover; background-position: center; animation: backgroundAnimation 3s ease-in-out infinite;">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <h5 class="card-title" style=" font-size:18px;  color: #000000;">Unidentified Persons</h5>
            <span  style="font-size: 25px; font-weight: bold; color: #7b61ff;"><i class="bi bi-info-circle"></i></span>
          </div>
          <h3 class="card-number" style="font-weight: bold; color: #000000;">{{ unidentifiedPersonTotalCounts || 0 }}</h3>
          <div class="progress" style="height: 10px; border-radius: 5px;">
            <div class="progress-bar" role="progressbar" [style.width]="((unidentifiedPersonGenderCounts.Female || 0) / (unidentifiedPersonTotalCounts || 1) * 100) + '%'" [style.backgroundColor]="'#2e16a9'" style="margin-right: 3px; border-radius: 5px;"></div> <!-- Coral for Female -->
            <div class="progress-bar" role="progressbar" [style.width]="((unidentifiedPersonGenderCounts.Male || 0) / (unidentifiedPersonTotalCounts || 1) * 100) + '%'" [style.backgroundColor]="'#7b61ff'" style="margin-right: 3px; border-radius: 5px;"></div> <!-- Soft Blue for Male -->
            <div class="progress-bar" role="progressbar" [style.width]="((unidentifiedPersonGenderCounts.Other || 0) / (unidentifiedPersonTotalCounts || 1) * 100) + '%'" [style.backgroundColor]="'#8E44AD'" style="border-radius: 5px;"></div> <!-- Purple for Other -->
          </div>
          <div class="d-flex justify-content-between mt-2">
            <div>
              <h6 class=" mb-0" style="font-weight: bold; color: #2e16a9;">{{ unidentifiedPersonGenderCounts.Female || 0 }}</h6>
              <small class="text-muted" style=" font-size: 0.875rem; color: #2e16a9;">{{ ((unidentifiedPersonGenderCounts.Female || 0) / (unidentifiedPersonTotalCounts || 1) * 100).toFixed(1) }}% Female</small>
            </div>
            <div>
              <h6 class=" mb-0" style="font-weight: bold; color: #7b61ff;">{{ unidentifiedPersonGenderCounts.Male || 0 }}</h6>
              <small class="text-muted" style=" font-size: 0.875rem; color: #7b61ff;">{{ ((unidentifiedPersonGenderCounts.Male || 0) / (unidentifiedPersonTotalCounts || 1) * 100).toFixed(1) }}% Male</small>
            </div>
            <div>
              <h6 class=" mb-0" style=" font-weight: bold; color: #8E44AD;">{{ unidentifiedPersonGenderCounts.Other || 0 }}</h6>
              <small class="text-muted" style=" font-size: 0.875rem; color: #000000;">{{ ((unidentifiedPersonGenderCounts.Other || 0) / (unidentifiedPersonTotalCounts || 1) * 100).toFixed(1) }}% Other</small>
            </div>
          </div>
        </div>
      </div>
    </div>
    
  
    <!-- Card 4 -->
    <div class="col-12 col-md-6 col-lg-4 mb-3">
      <div class="card  card-colour" style="background-color: white; background-size: cover; background-position: center; animation: backgroundAnimation 3s ease-in-out infinite;">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <h5 class="card-title" style=" font-size: 18px;  color: #000000;">Unidentified Bodies</h5>
            <span  style="font-size: 25px; font-weight: bold; color: #ff0000;"><i class="bi bi-eye-slash" style="fill: #ff0000;"></i></span>
          </div>
          <h3 class="card-number" style=" font-weight: bold; color: #000000;">{{ unidentifiedBodyTotalCount || 0 }}</h3>
          <div class="progress" style="height: 10px; border-radius: 5px;">
            <div class="progress-bar" role="progressbar" [style.width]="((unidentifiedBodyGenderCounts.Female || 0) / (unidentifiedBodyTotalCount || 1) * 100) + '%'" [style.backgroundColor]="'#b02a2a'" style="margin-right: 3px; border-radius: 5px;"></div> <!-- Coral for Female -->
            <div class="progress-bar" role="progressbar" [style.width]="((unidentifiedBodyGenderCounts.Male || 0) / (unidentifiedBodyTotalCount || 1) * 100) + '%'" [style.backgroundColor]="'#ff3f3f'" style="margin-right: 3px; border-radius: 5px;"></div> <!-- Soft Blue for Male -->
            <div class="progress-bar" role="progressbar" [style.width]="((unidentifiedBodyGenderCounts.Other || 0) / (unidentifiedBodyTotalCount || 1) * 100) + '%'" [style.backgroundColor]="'#8E44AD'" style="border-radius: 5px;"></div> <!-- Purple for Other -->
          </div>
          <div class="d-flex justify-content-between mt-2">
            <div>
              <h6 class=" mb-0" style=" font-weight: bold; color: #b02a2a;">{{ unidentifiedBodyGenderCounts.Female || 0 }}</h6>
              <small class="text-muted" style=" font-size: 0.875rem; color: #bf1616;">
                {{ ((unidentifiedBodyGenderCounts.Female || 0) / (unidentifiedBodyTotalCount || 1) * 100).toFixed(1) }}% Female
              </small>
            </div>
            <div>
              <h6 class=" mb-0" style=" font-weight: bold; color: #ff3f3f;">{{ unidentifiedBodyGenderCounts.Male || 0 }}</h6>
              <small class="text-muted" style="font-size: 0.875rem; color: #ff3f3f;">
                {{ ((unidentifiedBodyGenderCounts.Male || 0) / (unidentifiedBodyTotalCount || 1) * 100).toFixed(1) }}% Male
              </small>
            </div>
            <div>
              <h6 class=" mb-0" style=" font-weight: bold; color: #8E44AD;">{{ unidentifiedBodyGenderCounts.Other || 0 }}</h6>
              <small class="text-muted" style=" font-size: 0.875rem; color: #000000;">
                {{ ((unidentifiedBodyGenderCounts.Other || 0) / (unidentifiedBodyTotalCount || 1) * 100).toFixed(1) }}% Other
              </small>
            </div>
          </div>
        </div>
      </div>
    </div>
    
  </div>
  
  
  <div class="row">
    <!-- Map Section -->
    <div class="col-lg-8 col-md-12 mb-2">
      <div class="containerx">
        <!-- Filters Section -->
        <div class="row g-3">
          <!-- State, District, City, Village, Police Station -->
          <div class="col-12">
            <div class="row g-2">
              <span style="color: #ff8642; font-weight: bold;font-size: 25px;">Search Here! </span>
              <div class="col-lg col-md-6">
                <select
                  class="form-select form-select-sg"
                  [(ngModel)]="selectedState"
                  (change)="filterDataByFilters()"
                  aria-label="State"
                >
                  <option value="All States">All States</option>
                  <option *ngFor="let state of allstates" [value]="state">
                    {{ state }}
                  </option>
                </select>
              </div>
              <div class="col-lg col-md-6">
                <select
                  class="form-select form-select-sg"
                  [(ngModel)]="selectedDistrict"
                  (change)="filterDataByFilters()"
                  aria-label="District"
                >
                  <option value="All Districts">All Districts</option>
                  <option
                    *ngFor="let district of alldistricts"
                    [value]="district"
                  >
                    {{ district }}
                  </option>
                </select>
              </div>
              <div class="col-lg col-md-6">
                <select
                  class="form-select form-select-sg"
                  [(ngModel)]="selectedCity"
                  (change)="filterDataByFilters()"
                  aria-label="City"
                >
                  <option value="All Cities">All Cities</option>
                  <option *ngFor="let city of allcities" [value]="city">
                    {{ city }}
                  </option>
                </select>
              </div>
              <div class="col-lg col-md-6">
                <select
                  class="form-select form-select-sg"
                  [(ngModel)]="selectedVillage"
                  (change)="filterDataByFilters()"
                  aria-label="Village"
                >
                  <option value="All Villages">All Villages</option>
                  <option
                    *ngFor="let village of allVillages"
                    [value]="village"
                  >
                    {{ village }}
                  </option>
                </select>
              </div>
              <div class="col-lg col-md-6">
                <select
                  class="form-select form-select-sg"
                  [(ngModel)]="selectedPoliceStation"
                  (change)="filterDataByFilters()"
                  aria-label="Police"
                >
                  <option value="All Police Stations">
                    All Police Stations
                  </option>
                  <option
                    *ngFor="let station of allpolicestations"
                    [value]="station.id"
                  >
                    {{ station.name }}
                  </option>
                </select>
              </div>
            </div>
          </div>
          <!-- Gender, Height, Age, Marital Status -->
          <div class="col-12">
            <span>Personal Specilization </span>
            <div class="row g-2">
              
              <!-- Gender Filter -->
              <div class="col-lg col-md-6">
                <select
                  id="gender"
                  class="form-select form-select-sg"
                  [(ngModel)]="selectedgender"
                  (change)="filterDataByFilters()"
                  aria-label="Gender"
                >
                  <option value="All Genders">All Genders</option>
                  <option *ngFor="let gender of allgenders" [value]="gender">
                    {{ gender }}
                  </option>
                </select>
              </div>
          
              <!-- Height Range Filter -->
              <div class="col-lg col-md-6">
                <!-- <label for="heightRange" class="form-label">Height Range</label> -->
                <select
                  id="heightRange"
                  class="form-select form-select-sg"
                  [(ngModel)]="selectedHeightRange"
                  (change)="filterDataByFilters()"
                  aria-label="Height Range"
                >
                  <option value="All Heights">All Heights</option>
                  <option value="133-150">133-150 cm</option>
                  <option value="151-180">151-180 cm</option>
                  <option value="Above 180">Above 180 cm</option>
                </select>
              </div>
          
              <!-- Age Range Filter -->
              <div class="col-lg col-md-6">
                <!-- <label for="ageRange" class="form-label">Age Range</label> -->
                <select
                  id="ageRange"
                  class="form-select form-select-sg"
                  [(ngModel)]="selectedAgeRange"
                  (change)="filterDataByFilters()"
                  aria-label="Age Range"
                >
                  <option value="All Ages">All Ages</option>
                  <option value="0-18">0-18</option>
                  <option value="18-30">18-30</option>
                  <option value="30-50">30-50</option>
                  <option value="50-70">50-70</option>
                  <option value="Above 70">Above 70</option>
                </select>
              </div>
          
              <!-- Marital Status Filter -->
              <div class="col-lg col-md-6">
                <!-- <label for="maritalStatus" class="form-label">Marital Status</label> -->
                <select
                  id="maritalStatus"
                  class="form-select form-select-sg"
                  [(ngModel)]="selectedmarital"
                  (change)="filterDataByFilters()"
                  aria-label="Marital Status"
                >
                  <option value="Marital status">Marital Status</option>
                  <option value="Single">Single</option>
                  <option value="Married">Married</option>
                  <option value="Widowed">Widowed</option>
                </select>
              </div>
          
              <!-- Start Date Filter -->
              <div class="col-lg col-md-6">
                <!-- <label for="startDate" class="form-label">Start Date</label> -->
                <input 
                  id="startDate"
                  type="date" 
                  class="form-control form-select-sg" 
                  [(ngModel)]="selectedStartDate"
                  (change)="filterDataByFilters()"
                  aria-label="Start Date"
                />
              </div>
          
              <!-- End Date Filter -->
              <!-- <div class="col-lg col-md-6">
                <label for="endDate" class="form-label">End Date</label>
                <input 
                  id="endDate"
                  type="date" 
                  class="form-control form-select-sg" 
                  [(ngModel)]="selectedEndDate"
                  (change)="filterDataByFilters()"
                  aria-label="End Date"
                />
              </div> -->
              
            </div>
          </div>
          
        </div>
        <!-- Map Section -->
        <div class="row">
          <div class="col">
            <div class="p-1 ">
              <div
                id="map"
                style="
                  height: 500px;
                  border: 1px solid #000000;
                  border-radius: 5px;
                "
              ></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  
    <!-- Cards Section -->
    <div class="col-lg-4 col-md-12">
      <div class="row">
        <!-- Card 1: Missing Person -->
        <div class="col-12  mb-3">
          <div class="card border rounded bg-white">
            <div class="card-header rounded-top d-flex justify-content-between align-items-center">
              <h5 class="card-title mb-0" style="font-size: 18px;">Missing Person</h5>
              <i class="bi bi-people fs-4" style="color: #60d960;"></i>
            </div>
            <div class="card-body p-1">
              <div class="table-responsive">
                <table class="table table-sm table-bordered text-center mb-0">
                  <thead class="table-light">
                    <tr>
                      <td colspan="2" style="font-size: 17px;">Resolved Cases</td>
                      <th colspan="3">{{ Found_alivecount + Deceasedcount || 0 }}</th>
                    </tr>
                    <tr>
                      <td style="font-size: 16px;">Type</td>
                      <td style="font-size: 16px;">Male</td>
                      <td style="font-size: 16px;">Female</td>
                      <td style="font-size: 16px;">Transgender</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td style="font-size: 15px;">UB Found</td>
                      <td>{{ deceasedCountgendercount.Male || 0 }}</td>
                      <td>{{ deceasedCountgendercount.Female || 0 }}</td>
                      <td>{{ deceasedCountgendercount.Other || 0 }}</td>
                    </tr>
                    <tr>
                      <td style="font-size: 15px;">UP Matched</td>
                      <td>{{ found_alivegendercount.Male || 0 }}</td>
                      <td>{{ found_alivegendercount.Female || 0 }}</td>
                      <td>{{ found_alivegendercount.Other || 0 }}</td>
                    </tr>
                    <tr>
                      <td style="font-size: 15px;">Pending</td>
                      <td>{{ pendingGendercounts.Male || 0 }}</td>
                      <td>{{ pendingGendercounts.Female || 0 }}</td>
                      <td>{{ pendingGendercounts.Other || 0 }}</td>
                    </tr>
                    <tr style="background-color: #f0f8ff; font-weight: bold; font-size: 16px;">
                      <td>All Counts</td>
                      <td>{{ deceasedCountgendercount.Male + found_alivegendercount.Male + pendingGendercounts.Male || 0 }}</td>
                      <td>{{ deceasedCountgendercount.Female + found_alivegendercount.Female + pendingGendercounts.Female || 0 }}</td>
                      <td>{{ deceasedCountgendercount.Other + found_alivegendercount.Other + pendingGendercounts.Other || 0 }}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
        
        
        
        
       
        
        

        <!-- Card 2: Unidentified Person -->
        <div class="col-12 mb-3">
          <div class="card border-1 rounded">
            <div class="card-header text-white rounded-top d-flex justify-content-between align-items-center">
              <h5 class="card-title mb-0" style="font-size: 18px;">Unidentified Person</h5>
              <i class="bi bi-info-circle fs-4" style="color: #60d960;"></i>
            </div>
            <div class="card-body p-1">
              <div class="table-responsive">
                <table class="table table-sm table-bordered text-center mb-0">
                  <thead class="table-light">
                    <tr>
                      <td colspan="2" style="font-size: 17px;">Resolved Cases</td>
                      <th colspan="3">{{ UPFound_alivecount + UPDeceasedcount || 0 }}</th>
                    </tr>
                    <tr>
                      <td style="font-size: 16px;">Type</td>
                      <td style="font-size: 16px;">Male</td>
                      <td style="font-size: 16px;">Female</td>
                      <td style="font-size: 16px;">Transgender</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td style="font-size: 15px;">MP Matched</td>
                      <td>{{ UPfound_alivegendercount.Male || 0 }}</td>
                      <td>{{ UPfound_alivegendercount.Female || 0 }}</td>
                      <td>{{ UPfound_alivegendercount.Other || 0 }}</td>
                    </tr>
                    <tr>
                      <td style="font-size: 15px;">UB Found</td>
                      <td>{{ UPdeceasedCountgendercount.Male || 0 }}</td>
                      <td>{{ UPdeceasedCountgendercount.Female || 0 }}</td>
                      <td>{{ UPdeceasedCountgendercount.Other || 0 }}</td>
                    </tr>
                    <tr>
                      <td style="font-size: 15px;">Pending</td>
                      <td>{{ UPpendingGendercounts.Male || 0 }}</td>
                      <td>{{ UPpendingGendercounts.Female || 0 }}</td>
                      <td>{{ UPpendingGendercounts.Other || 0 }}</td>
                    </tr>
                    <tr style="background-color: #f0f8ff; font-weight: bold; font-size: 16px;">
                      <td>All Counts</td>
                      <td>{{ UPfound_alivegendercount.Male + UPdeceasedCountgendercount.Male + UPpendingGendercounts.Male || 0 }}</td>
                      <td>{{ UPfound_alivegendercount.Female + UPdeceasedCountgendercount.Female + UPpendingGendercounts.Female || 0 }}</td>
                      <td>{{ UPfound_alivegendercount.Other + UPdeceasedCountgendercount.Other + UPpendingGendercounts.Other || 0 }}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
        
  
        <!-- Card 3: Unidentified Bodies -->
        <div class="col-12">
          <div class="card border-1 rounded">
            <div class="card-header rounded-top d-flex justify-content-between align-items-center">
              <h5 class="card-title mb-0" style="font-size: 18px;">Unidentified Bodies</h5>
              <i class="bi bi-eye-slash fs-4" style="color: #60d960;"></i>
            </div>
            <div class="card-body p-1">
              <div class="table-responsive">
                <table class="table table-sm table-bordered text-center mb-0">
                  <thead class="table-light">
                    <tr>
                      <td colspan="2" style="font-size: 17px;">Resolved Cases</td>
                      <th colspan="3">{{ UBDeceasedcount + UBFound_alivecount || 0 }}</th>
                    </tr>
                    <tr>
                      <td style="font-size: 16px;">Type</td>
                      <td style="font-size: 16px;">Male</td>
                      <td style="font-size: 16px;">Female</td>
                      <td style="font-size: 16px;">Transgender</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td style="font-size: 15px;">MP Matched</td>
                      <td>{{ UBfound_alivegendercount.Male || 0 }}</td>
                      <td>{{ UBfound_alivegendercount.Female || 0 }}</td>
                      <td>{{ UBfound_alivegendercount.Other || 0 }}</td>
                    </tr>
                    <tr>
                      <td style="font-size: 15px;">UP Matched</td>
                      <td>{{ UBdeceasedCountgendercount.Male || 0 }}</td>
                      <td>{{ UBdeceasedCountgendercount.Female || 0 }}</td>
                      <td>{{ UBdeceasedCountgendercount.Other || 0 }}</td>
                    </tr>
                    <tr>
                      <td style="font-size: 15px;">Pending</td>
                      <td>{{ UBpendingGendercounts.Male || 0 }}</td>
                      <td>{{ UBpendingGendercounts.Female || 0 }}</td>
                      <td>{{ UBpendingGendercounts.Other || 0 }}</td>
                    </tr>
                    <tr style="background-color: #f0f8ff; font-weight: bold; font-size: 16px;">
                      <td>All Counts</td>
                      <td>{{ UBfound_alivegendercount.Male + UBdeceasedCountgendercount.Male + UBpendingGendercounts.Male || 0 }}</td>
                      <td>{{ UBfound_alivegendercount.Female + UBdeceasedCountgendercount.Female + UBpendingGendercounts.Female || 0 }}</td>
                      <td>{{ UBfound_alivegendercount.Other + UBdeceasedCountgendercount.Other + UBpendingGendercounts.Other || 0 }}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
        
      </div>
    </div>

  </div>
  

  <!-- filtered data -->
  <div class="row mt-2">
    <div class="col">
      <div class="card cardff rounded-3 shadow-lg">
        <div class="card-header card-headerff border-bottom-0">
          <h5 class="card-title text-warning fw-bold">Filtered Persons</h5>
        </div>
        <div class="card-body px-4 py-4">
          <!-- Tab navigation -->
          <ul class="nav nav-tabs mb-4" id="filteredTab" role="tablist">
            <li class="nav-item" role="presentation">
              <a class="nav-link active" id="missing-tab" data-bs-toggle="tab" href="#missing" role="tab" aria-controls="missing" aria-selected="true">
                <i class="bi bi-person-bounding-box me-2"></i>Missing Persons
              </a>
            </li>
            <li class="nav-item" role="presentation">
              <a class="nav-link" id="unidentified-tab" data-bs-toggle="tab" href="#unidentified" role="tab" aria-controls="unidentified" aria-selected="false">
                <i class="bi bi-person-lines-fill me-2"></i>Unidentified Persons
              </a>
            </li>
            <li class="nav-item" role="presentation">
              <a class="nav-link" id="bodies-tab" data-bs-toggle="tab" href="#bodies" role="tab" aria-controls="bodies" aria-selected="false">
                <i class="bi bi-person-x-fill me-2"></i>Unidentified Bodies
              </a>
            </li>
          </ul>
  
          <!-- Tab content -->
          <div class="tab-content" id="filteredTabContent">
            <!-- Missing Persons Tab -->
            <div class="tab-pane fade show active" id="missing" role="tabpanel" aria-labelledby="missing-tab">
              <div class="tableff-responsive">
                <table class="table tableff table-hover align-middle">
                  <thead class="table-light">
                    <tr>
                      <th>Sr No.</th>
                      <th>Photo</th>
                      <th>Full Name</th>
                      <th>Age</th>
                      <th>Gender</th>
                      <th>Blood Group</th>
                      <th>City</th>
                      <th>District</th>
                      <th>State</th>
                      <th>Action</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let person of filteredMissingPersonssss; let i = index">
                      <td>{{ i + 1 }}</td>
                      <td>
                        <img [src]="person.photo_upload ? environment.apiUrl + person.photo_upload : 'assets/images/Nophoto.png'"
                             alt="Person Photo" class="img-fluid rounded" style="height: 80px; width: 80px; object-fit: cover;" />
                      </td>
                      <td>{{ person.full_name || 'Unknown' }}</td>
                      <td>{{ person.age || 'Not specified' }}</td>
                      <td>{{ person.gender || 'Not specified' }}</td>
                      <td>{{ person.blood_group || 'Not specified' }}</td>
                      <td>{{ person.address.city || 'Not specified' }}</td>
                      <td>{{ person.address.district || 'Not specified' }}</td>
                      <td>{{ person.address.state || 'Not specified' }}</td>
                      
                      <td>
                        <button class="btn btn-outline-primary btn-sm" (click)="viewDetails(person)">View</button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
  
            <!-- Unidentified Persons Tab -->
            <div class="tab-pane fade" id="unidentified" role="tabpanel" aria-labelledby="unidentified-tab">
              <div class="tableff-responsive">
                <table class="table tableff table-hover align-middle">
                  <thead class="table-light">
                    <tr>
                      <th>Sr No.</th>
                      <th>Photo</th>
                      <th>Full Name</th>
                      <th>Age</th>
                      <th>Gender</th>
                      <th>Blood Group</th>
                      <th>City</th>
                      <th>Distict</th>
                      <th>State</th>
                      <th>Action</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let person of filteredUnidentifiedPersonssss; let i = index">
                      <td>{{ i + 1 }}</td>
                      <td>
                        <img [src]="person.photo_upload ? environment.apiUrl + person.photo_upload : 'assets/images/Nophoto.png'"
                             alt="Person Photo" class="img-fluid rounded" style="height: 80px; width: 80px; object-fit: cover;" />
                      </td>
                      <td>{{ person.full_name || 'Unknown' }}</td>
                      <td>{{ person.estimated_age || 'Not specified' }}</td>
                      <td>{{ person.gender || 'Not specified' }}</td>
                      <td>{{ person.blood_group || 'Not specified' }}</td>
                      <td>{{ person.address.city || 'Not specified' }}</td>
                      <td>{{ person.address.district || 'Not specified' }}</td>
                      <td>{{ person.address.state || 'Not specified' }}</td>
                      
                      <td>
                        <button class="btn btn-outline-primary btn-sm" (click)="viewDetails(person)">View</button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
  
            <!-- Unidentified Bodies Tab -->
            <div class="tab-pane fade" id="bodies" role="tabpanel" aria-labelledby="bodies-tab">
              <div class="tableff-responsive">
                <table class="table tableff table-hover align-middle">
                  <thead class="table-light">
                    <tr>
                      <th>Sr No.</th>
                      <th>Photo</th>
                      <th>Full Name</th>
                      <th>Age</th>
                      <th>Gender</th>
                      <th>Blood Group</th>
                      <th>City</th>
                      <th>District</th>
                      <th>State</th>
                      <th>Action</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let body of filteredunidentifiedboidessss; let i = index">
                      <td>{{ i + 1 }}</td>
                      <td>
                        <img [src]="body.body_photo_upload ? environment.apiUrl + body.body_photo_upload : 'assets/images/Nophoto.png'"
                             alt="Body Photo" class="img-fluid rounded" style="height: 80px; width: 80px; object-fit: cover;" />
                      </td>
                      <td>{{ body.full_name || 'Unknown' }}</td>
                      <td>{{ body.estimated_age || 'Not specified' }}</td>
                      <td>{{ body.gender || 'Not specified' }}</td>
                      <td>{{ body.blood_group || 'Not specified' }}</td>
                      <td>{{ body.address.city|| 'Not specified' }}</td>
                      <td>{{ body.address.district || 'Not specified' }}</td>
                      <td>{{ body.address.state || 'Not specified' }}</td>
                      <td>
                        <button class="btn btn-outline-primary btn-sm" (click)="viewDetails(body)">View</button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  
</div>

<div class="col-12 mt-3">
  <ngx-charts-pie-chart
    [results]="chartData"
    [scheme]="colorScheme"
    [legend]="true"
    [labels]="true"
    [doughnut]="true"
    [arcWidth]="0.25">
  </ngx-charts-pie-chart>
</div>




<!-- model  -->
<div
class="modal fade"
id="filteredDataModal"
tabindex="-1"
aria-labelledby="filteredDataModalLabel"
aria-hidden="true"
>
<div class="modal-dialog modal-lg">
  <div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title" id="filteredDataModalLabel">
        Person Details
      </h5>
      <button
        type="button"
        class="btn-close"
        data-bs-dismiss="modal"
        aria-label="Close"
      ></button>
    </div>
    <div class="modal-body">
      <!-- Person Details -->
      <div *ngIf="selectedPerson" class="container">
        <!-- Person Overview Section -->
        <div class="row mb-4">
          <div class="col-md-5 text-center">
            <img
              [src]="
                selectedPerson.photo_upload
                  ? environment.apiUrl + selectedPerson.photo_upload
                  : 'assets/images/Nophoto.png'
              "
              alt="No Photo uploaded"
              class="img-fluid rounded"
            />
          </div>
          <div class="col-md-7">
            <h4>{{ selectedPerson.full_name }}</h4>
            <p>
              <strong>Age:</strong>
              {{ selectedPerson.age || selectedPerson.estimated_age }}
            </p>
            <p><strong>Gender:</strong> {{ selectedPerson.gender }}</p>
            <p>
              <strong>Blood Group:</strong> {{ selectedPerson.blood_group }}
            </p>
            <p>
              <strong>Condition:</strong> {{ selectedPerson.condition }}
            </p>
            <p>
              <strong>Last Seen Location:</strong>
              {{
                selectedPerson.last_seen_location ||
                  selectedPerson.body_seen_details ||
                  selectedPerson.last_seen_details
              }}
            </p>
          </div>
        </div>

        <!-- personal info Section -->
        <h5 class="mb-3 text-primary">Appearance Information</h5>
        <div class="row mb-3">
          <div class="col-md-3"><strong>Height:</strong></div>
          <div class="col-md-9">{{ selectedPerson.height || "N/A" }}</div>
        </div>

        <div class="row mb-3">
          <div class="col-md-3"><strong>Weight:</strong></div>
          <div class="col-md-9">{{ selectedPerson.weight || "N/A" }}</div>
        </div>

        <div class="row mb-3">
          <div class="col-md-3"><strong>complexion:</strong></div>
          <div class="col-md-9">
            {{ selectedPerson.complexion || "N/A" }}
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-3"><strong>Hair color:</strong></div>
          <div class="col-md-9">
            {{ selectedPerson.hair_color || "N/A" }}
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-3"><strong>Hair type:</strong></div>
          <div class="col-md-9">
            {{ selectedPerson.hair_type || "N/A" }}
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-3"><strong>Eye color:</strong></div>
          <div class="col-md-9">
            {{ selectedPerson.eye_color || "N/A" }}
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-3"><strong>Birth Mark:</strong></div>
          <div class="col-md-9">
            {{ selectedPerson.birth_mark || "N/A" }}
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-3"><strong>Distinctive mark:</strong></div>
          <div class="col-md-9">
            {{ selectedPerson.distinctive_mark || "N/A" }}
          </div>
        </div>

        <!-- Contact Information Section -->
        <h5 class="mb-3 text-primary">Contact Information</h5>
        <div class="row mb-3">
          <div class="col-md-3"><strong>Phone Number:</strong></div>
          <div class="col-md-9">
            {{ selectedPerson.contact.phone_number }}
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3"><strong>Email:</strong></div>
          <div class="col-md-9">{{ selectedPerson.contact.email }}</div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3"><strong>Social Media:</strong></div>
          <div class="col-md-9">
            {{ selectedPerson.contact.social_media_handles }}
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3"><strong>Contact Type:</strong></div>
          <div class="col-md-9">
            {{ selectedPerson.contact.type }}({{
              selectedPerson.contact.subtype
            }})
          </div>
        </div>

        <!-- Address Information Section -->
        <h5 class="mb-3 text-primary">Address Information</h5>
        <div class="row mb-3">
          <div class="col-md-3"><strong>Street:</strong></div>
          <div class="col-md-9">{{ selectedPerson.address.street }}</div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3"><strong>Apartment:</strong></div>
          <div class="col-md-9">
            {{ selectedPerson.address.apartment_number }}
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3"><strong>City:</strong></div>
          <div class="col-md-9">{{ selectedPerson.address.city }}</div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3"><strong>Village:</strong></div>
          <div class="col-md-9">{{ selectedPerson.address.village }}</div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3"><strong>landmark:</strong></div>
          <div class="col-md-9">{{ selectedPerson.address.landmark }}</div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3"><strong>location:</strong></div>
          <div class="col-md-9">{{ selectedPerson.address.location }}</div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3"><strong>location:</strong></div>
          <div class="col-md-9">
            {{ selectedPerson.address.address_type }}
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3"><strong>State:</strong></div>
          <div class="col-md-9">{{ selectedPerson.address.state }}</div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3"><strong>Country:</strong></div>
          <div class="col-md-9">{{ selectedPerson.address.country }}</div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3"><strong>Postal Code:</strong></div>
          <div class="col-md-9">
            {{ selectedPerson.address.postal_code }}
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3"><strong>Address subtype:</strong></div>
          <div class="col-md-9">{{ selectedPerson.address.subtype }}</div>
        </div>

        <!-- Educational and Occupation Information -->
        <h5 class="mb-3 text-primary">Educational & Occupation Details</h5>
        <div class="row mb-3">
          <div class="col-md-3"><strong>caste :</strong></div>
          <div class="col-md-9">{{ selectedPerson.caste || "N/A" }}</div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3"><strong>sub caste:</strong></div>
          <div class="col-md-9">
            {{ selectedPerson.sub_caste || "N/A" }}
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3"><strong>religion:</strong></div>
          <div class="col-md-9">{{ selectedPerson.religion || "N/A" }}</div>
        </div>

        <div class="row mb-3">
          <div class="col-md-3"><strong>mother tongue:</strong></div>
          <div class="col-md-9">
            {{ selectedPerson.mother_tongue || "N/A" }}
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3">
            <strong>other known Languages:</strong>
          </div>
          <div class="col-md-9">
            {{ selectedPerson.other_known_languages || "N/A" }}
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3"><strong>Educational Details:</strong></div>
          <div class="col-md-9">
            {{ selectedPerson.educational_details }}
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3"><strong>Occupation:</strong></div>
          <div class="col-md-9">{{ selectedPerson.occupation }}</div>
        </div>

        <!-- Identification and Missing Details -->
        <h5 class="mb-3 text-primary">
          Identification & Missing Information
        </h5>
        <div class="row mb-3">
          <div class="col-md-3"><strong>Identification Type:</strong></div>
          <div class="col-md-9">
            {{ selectedPerson.identification_details }}
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3">
            <strong>Identification Card Number:</strong>
          </div>
          <div class="col-md-9">
            {{ selectedPerson.identification_card_no }}
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3"><strong>Missing Date:</strong></div>
          <div class="col-md-9">{{ selectedPerson.missing_date }}</div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3"><strong>Missing Time:</strong></div>
          <div class="col-md-9">{{ selectedPerson.missing_time }}</div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3"><strong>missing_location:</strong></div>
          <div class="col-md-9">{{ selectedPerson.missing_location }}</div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3"><strong>Location Details:</strong></div>
          <div class="col-md-9">{{ selectedPerson.location_details }}</div>
        </div>
        <!-- Investigating Officer & Reporting Person Details -->
        <h5 class="mb-3 text-primary">Investigation Details</h5>
        <div class="row mb-3">
          <div class="col-md-3"><strong>Police station :</strong></div>
          <div class="col-md-9">
            {{ selectedPerson.police_station_name_and_address.name }}
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3">
            <strong>Police station address:</strong>
          </div>
          <div class="col-md-9">
            {{ selectedPerson.police_station_name_and_address.address }}
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3">
            <strong>Investigating Officer:</strong>
          </div>
          <div class="col-md-9">
            {{ selectedPerson.investigating_officer_name }} ({{
              selectedPerson.investigating_officer_contact_number
            }})
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3"><strong>Reporting Person:</strong></div>
          <div class="col-md-9">
            {{ selectedPerson.reportingperson_name }} ({{
              selectedPerson.relationship_with_victim
            }})
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3"><strong>Willing to Volunteer:</strong></div>
          <div class="col-md-9">
            {{ selectedPerson.willing_to_volunteer ? "Yes" : "No" }}
          </div>
        </div>
        <!-- Map Section -->
        <h5 class="mb-3 text-primary">Location of missing Person</h5>
        <div class="row mb-3">
          <div class="col-md-12">
            <div id="map"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button
        type="button"
        class="btn btn-secondary"
        data-bs-dismiss="modal"
      >
        Close
      </button>
    </div>
  </div>
</div>
</div>