<div class="container-fluid d-flex justify-content-center align-items-center vh-90 p-4 containerx">
  <div class="text-center text-white">
    <h4 class="fw-bold fs-5">Find Your Local Police Station</h4>
    <p class="fs-6">Quick access to emergency services and police stations across the country</p>

    <!-- Search Form -->
    <form class="mt-4" (ngSubmit)="onSearch()">
      <div class="row g-3 justify-content-center">
        <!-- Search by Name -->
        <div class="col-md-3">
          <input type="text" class="form-control input-sm" placeholder="Search by Name" [(ngModel)]="searchName" name="searchName">
        </div>
        <!-- Search by City -->
        <div class="col-md-3">
          <input type="text" class="form-control input-sm" placeholder="Search by City" [(ngModel)]="searchCity" name="searchCity">
        </div>
        <!-- Search by District -->
        <div class="col-md-3">
          <input type="text" class="form-control input-sm" placeholder="Search by District" [(ngModel)]="searchdistrict" name="searchDistrict">
        </div>
        <!-- Search by State -->
        <div class="col-md-3">
          <input type="text" class="form-control input-sm" placeholder="Search by State" [(ngModel)]="searchstate" name="searchState">
        </div>
      </div>

      <!-- Search Button -->
      <div class="mt-3">
        <button class="btn btn-outline-white search-btn btn-sm">
          <i class="bi bi-search"></i> Search
        </button>
      </div>
    </form>
  </div>
</div>


<div class="container my-4">
  <div class="card shadow-lg rounded border-1 p-3 mb-1 border-right" *ngFor="let police of total_policestation">
    <div class="row g-0">
      <!-- Left Section: Image Placeholder -->
      <!-- Left Section: Image Placeholder -->
        <div class="col-md-4 d-flex align-items-center justify-content-center bg-light ">
          <div class="w-100 h-100 overflow-hidden">
            <img *ngIf="police.photo_upload; else placeholder" 
                [src]="environment.apiUrl + police.photo_upload" 
                alt="{{police.name}}" 
                class="img-fluid w-100 h-100 object-fit-cover"
                style="border-radius: 8px;">
            <ng-template #placeholder>
              <i class="bi bi-image" style="font-size: 3rem; color: #ccc;"></i>
            </ng-template>
          </div>
        </div>


      <!-- Right Section: Details -->
      <div class="col-md-8 p-4">
        <div class="d-flex justify-content-between align-items-start">
          <h3 class="fw-bold fs-6">{{ police.name }}</h3>
          <span class="badge" [ngClass]="{'bg-warning': police.station_status === 'Active', 'bg-danger': police.station_status !== 'Active'}">
            {{ police.station_status }}
          </span>
        </div>
        <p class="text-muted fs-6">
          <i class="bi bi-geo-alt"></i> {{ police.address }}, {{ police.city }}
        </p>

        <!-- Horizontal Layout for Info -->
        <div class="d-flex flex-wrap">
          <!-- Contact -->
          <div class="p-3 flex-fill">
            <h5 class="fs-6"><i class="bi bi-telephone"></i> Contact</h5>
            <p class="fs-6">Emergency: 112</p>
            <p class="fs-6">Helpline: 1091</p>
            <p class="fs-6">Office: {{ police.telephone_no }}</p>
          </div>

          <!-- Officer In Charge -->
          <div class="p-3 flex-fill">
            <h5 class="fs-6"><i class="bi bi-person-fill" style="color: #000;"></i> Officer In Charge</h5>
            <p class="fs-6">{{ police.officer_name }}acp sharma</p>
            <p class="fs-6">{{ police.officer_rank }}82</p>
            <p class="fs-6">{{ police.officer_contact }}7412589632</p>
          </div>

          <!-- Hours & Info -->
          <div class="p-3 flex-fill">
            <h5 class="fs-6"><i class="bi bi-clock"></i> Hours & Info</h5>
            <p class="fs-6">24/7</p>
            <p class="fs-6">Est. {{ police.established_year }}</p>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="mt-3">
          <button class="btn btn-outline-primary search-btn btn-sm me-2" (click)="seeMores(police)">
             More Info
          </button>
          <!-- <button class="btn btn-secondary btn-sm" (click)="seeChowikis(police)">
            <i class="fa fa-cog fa-spin"></i> See Chowikis Under
          </button> -->
        </div>
      </div>
    </div>
  </div>

  <!-- Pagination -->
  <div *ngIf="total_policestation?.length > 0">
    <app-pagination
      [currentPage]="pagination.current_page"
      [totalPages]="pagination.total_pages"
      [hasPrevious]="pagination.has_previous"
      [hasNext]="pagination.has_next"
      (pageChange)="onPageChange($event)">
    </app-pagination>
  </div>

  <!-- No Data Message -->
  <div *ngIf="total_policestation?.length === 0">
    <p class="fs-6">No Police Station Available.</p>
  </div>
</div>



<div class="modal fade" id="personModal" tabindex="-1" aria-labelledby="personModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="personModalLabel">Police Station Details</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div *ngIf="selectedPoliceStation" class="container">
            <!-- Person Overview Section -->
            <div class="row mb-12">
              <div class="col-md-5 text-center">
                <img [src]="selectedPoliceStation.photo_upload ? (environment.apiUrl + selectedPoliceStation.photo_upload) : 'assets/images/pngwng.com.png'" alt="station Photo" class="img-fluid rounded">
              </div>
              <div class="col-md-7">
                <h5>{{ selectedPoliceStation.name }}</h5>
                <p>Website:
                  <a *ngIf="selectedPoliceStation.website" [href]="selectedPoliceStation.website" target="_blank" class="text-primary">{{ selectedPoliceStation.website }}</a>
                  <span *ngIf="!selectedPoliceStation.website">Not Available</span>
                </p>
              </div>
            </div>
            <!-- Contact Information Section -->
            <h5 class="mb-3 text-primary">Information</h5>
            <div class="row mb-3">
                <div class="col-md-3">Zone:</div>
                <div class="col-md-9">{{ selectedPoliceStation.zone_name }}</div>
              </div>
              <div class="row mb-3">
                <div class="col-md-3">Division Name:</div>
                <div class="col-md-9">{{ selectedPoliceStation.division_name }}</div>
              </div>
            <div class="row mb-3">
              <div class="col-md-3">Address:</div>
              <div class="col-md-9">{{ selectedPoliceStation.address }}</div>
            </div>
            <div class="row mb-3">
              <div class="col-md-3">Telephone No:</div>
              <div class="col-md-9">{{ selectedPoliceStation.telephone_no }}</div>
            </div>
            <div class="row mb-3">
              <div class="col-md-3">Village:</div>
              <div class="col-md-9">{{ selectedPoliceStation.village }}</div>
            </div>
            <div class="row mb-3">
              <div class="col-md-3">City:</div>
              <div class="col-md-9">{{ selectedPoliceStation.city }}</div>
            </div>
            <div class="row mb-3">
              <div class="col-md-3">Cistrict:</div>
              <div class="col-md-9">{{ selectedPoliceStation.district }}</div>
            </div>
            <div class="row mb-3">
              <div class="col-md-3">District:</div>
              <div class="col-md-9">{{ selectedPoliceStation.state }}</div>
            </div>
            <div class="row mb-3">
              <div class="col-md-3">Country:</div>
              <div class="col-md-9">{{ selectedPoliceStation.country }}</div>
            </div>
            <!-- Map Section -->
            <h5 class="mb-3 text-primary">Location of police station</h5>
            <div class="row mb-3">
              <div class="col-md-12">
                <div id="map" ></div>
              </div>
            </div>         
           </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-secondary search-btn" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>