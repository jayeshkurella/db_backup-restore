<?xml version="1.0" encoding="UTF-8" ?>
<odoo>

    <record id="action_report_opd_invoice" model="ir.actions.report">
        <field name="name">OPD Invoice</field>
        <field name="model">hms.opd</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">custom_opd_changes.report_invoice_opd</field>
        <field name="report_file">custom_opd_changes.report_invoice_opd</field>
        <field name="print_report_name">'OPD Invoice - %s' % (object.name)</field>
        <field name="binding_model_id" ref="model_hms_opd"/>
        <field name="binding_type">report</field>
        <field name="groups_id" eval="[(6, 0, [ref('customized_annual_form.group_user_view_admin')])]"/>
    </record>

    <template id="report_invoice_opd">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <div class="page">
                    <div class="header-container" style="margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center;">
                        <div class="block-1" 
                            style="border: solid 1px; padding: 20px; width: 30%; height: auto; 
                                box-sizing: border-box; display: flex; flex-direction: column; 
                                align-items: center; text-align: center;">

                            <!-- Physician Name -->
                            <div style="margin-bottom: 10px;">
                                <strong t-field="doc.primary_physician_id.name"/>
                            </div>

                            <!-- Specialty with Label (Separate Row) -->
                            <div style="margin-bottom: 10px; width: 100%;">
                                <strong>Specialty:</strong><span t-field="doc.primary_physician_id.specialty_id"/>
                            </div>

                            <!-- Education (Degrees) with Label (Separate Row) -->
                            <div style="width: 100%;">
                                <strong>Education:</strong><span t-field="doc.primary_physician_id.degree_ids"/>
                            </div>

                        </div>
                        <!-- Left Block (Primary Physician) -->
                        <!-- <div class="block-1" style="border: solid 1px; padding: 20px; width: 30%; height: 200px; box-sizing: border-box; display: flex; align-items: center; justify-content: center;">
                            <strong t-field="doc.primary_physician_id.name"/>
                            <strong t-field="doc.primary_physician_id.specialty_id"/>                            
                        </div> -->

                        <!-- Center Block (Logos) -->
                        <div class="col-md-4" style="display: flex; justify-content: center; align-items: center; gap: 20px;">
                            <img src="https://i.postimg.cc/rFP03NNg/Whats-App-Image-2024-12-16-at-5-22-10-PM-1.jpg" style="width: 100px; height: 100px;"/>
                            <img src="https://i.postimg.cc/JhJkbHJx/Whats-App-Image-2024-12-16-at-5-22-10-PM.jpg" style="width: 100px; height: 100px;"/>
                        </div>

                        <!-- Right Block (HCJMRI Info) -->
                        <div class="block-3" style="border: solid 1px; padding: 20px; width: 30%; height: 200px; box-sizing: border-box; display: flex; align-items: center; justify-content: center;">
                            <div>
                                <strong>HCJMRI</strong><br/>
                                Lower Ground Floor,<br/>
                                Block V, Jehangir Hospital,<br/>
                                32 Sassoon Road,<br/>
                                Pune 411 001.<br/>
                                <strong>Timing :</strong> 9 AM to 1 PM (Saturday)<br/>
                                <strong>Sunday :</strong> Closed
                            </div>
                        </div>

                    </div>

                    <!-- <div class="header-container" style="margin-bottom: 20px; overflow: hidden;">
                        <div class="block-1" style="float: left; border: solid 1px; padding: 40px; margin-right: 2%; width: 30%; height:200px; box-sizing: border-box;">
                            <div>
                                <strong t-field="doc.primary_physician_id.name"/>
                            </div>
                        </div>
                        
                        <div class="col-md-2" style="float: left; padding: 10px; width: 30%; height: auto;">
                            <img src="https://i.postimg.cc/rFP03NNg/Whats-App-Image-2024-12-16-at-5-22-10-PM-1.jpg" style="float: left; padding: 25px; width: 35%; height: auto; margin-right: 4%;"/>
                            <img src="https://i.postimg.cc/JhJkbHJx/Whats-App-Image-2024-12-16-at-5-22-10-PM.jpg" style="float: left; width: 35%; height: auto;"/>
                        </div>
                        <div class="block-3" style="float: right; border: solid 1px; padding: 20px; width: 30%; box-sizing: border-box;">
                            <div>
                                <strong>HCJMRI</strong><br/>
                                Lower Ground Floor,<br/>
                                Block V, Jehangir Hospital,<br/>
                                32 Sassoon Road,<br/>
                                Pune 411 001.<br/>
                                <strong>Timing :</strong> 9 AM to 1 PM (Saturday)<br/>
                                <strong>Sunday :</strong> Closed
                            </div>
                        </div>
                    </div> -->
                    
                    <!-- Horizontal Line -->
                    <div style="border-top: 5px solid #000; margin-top: 20px; margin-bottom: 20px;"></div>

                    <table style="width: 100%; margin-top: 20px; margin-bottom: 20px; padding: 20px; border-collapse: collapse;">
                        <tr>
                            <td style="width: 33%; text-align: left; padding: 10px; font-size: 18px;">
                                <strong>Enrollment No:</strong>
                                <t t-esc="doc.enrollment_no"/>
                                <br/>
                                <strong>Name:</strong>
                                <t t-esc="doc.patient_id.name"/>
                                <br/>
                                <strong>Diabetes Age:</strong>
                                <t t-esc="doc.diabetes_age"/>
                            </td>
                            <td style="width: 33%; text-align: left; padding: 10px; font-size: 18px; ">
                                <strong>Date of Record:</strong>
                                <t t-esc="doc.date_of_record"/>
                                <br/>
                                <strong>Age:</strong>
                                <t t-esc="doc.age"/>
                                <br/>
                                <strong>Height (cm):</strong>
                                <t t-esc="doc.height"/>
                            </td>
                            <td style="width: 33%; text-align: left; padding: 10px; font-size: 18px; ">
                                <strong>Gender:</strong>
                                <t t-esc="doc.gender"/>
                                <br/>
                                <strong>Weight (kg):</strong>
                                <t t-esc="doc.weight"/>
                                <br/>
                                <strong>BP:</strong>
                                <t t-esc="doc.systolic_bp"/>
                            </td>
                        </tr>
                    </table>
                    <div style="border-top: 5px solid #000; margin-top: 20px; margin-bottom: 20px;"></div>
    
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr>
                                <th style="border-bottom: 2px solid #000; text-align: left; padding: 8px;">Complications</th>
                                <th style="border-bottom: 2px solid #000; text-align: left; padding: 8px;">Medication</th>
                                <th style="border-bottom: 2px solid #000; text-align: left; padding: 8px;">Details</th>
                                <th style="border-bottom: 2px solid #000; text-align: left; padding: 8px;">Comorbidities</th>
                                <th style="border-bottom: 2px solid #000; text-align: left; padding: 8px;">Medication</th>
                                <th style="border-bottom: 2px solid #000; text-align: left; padding: 8px;">Details</th>
                                <th style="border-bottom: 2px solid #000; text-align: left; padding: 8px;">Other</th>
                                <th style="border-bottom: 2px solid #000; text-align: left; padding: 8px;">Medication</th>
                                <th style="border-bottom: 2px solid #000; text-align: left; padding: 8px;">Details</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-foreach="doc.opd_cco_ids" t-as="cco">
                                <tr>
                                    <!-- Complications Data -->
                                    <td style="border-bottom: 1px solid #000; padding: 8px;">
                                        <span t-esc="cco.complications"/>
                                    </td>
                                    <td style="border-bottom: 1px solid #000; padding: 8px;">
                                        <span t-esc="cco.complications_medicine_name"/>
                                    </td>
                                    <td style="border-bottom: 1px solid #000; padding: 8px;">
                                        <span t-esc="cco.complications_short_comment"/>
                                    </td>
                                    
                                    <!-- Comorbidities Data -->
                                    <td style="border-bottom: 1px solid #000; padding: 8px;">
                                        <span t-esc="cco.comorbidities"/>
                                    </td>
                                    <td style="border-bottom: 1px solid #000; padding: 8px;">
                                        <span t-esc="cco.comorbidities_medicine_name"/>
                                    </td>
                                    <td style="border-bottom: 1px solid #000; padding: 8px;">
                                        <span t-esc="cco.comorbidities_short_comment"/>
                                    </td>
                                    
                                    <!-- Other Data -->
                                    <td style="border-bottom: 1px solid #000; padding: 8px;">
                                        <span t-esc="cco.others"/>
                                    </td>
                                    <td style="border-bottom: 1px solid #000; padding: 8px;">
                                        <span t-esc="cco.others_medicine_name"/>
                                    </td>
                                    <td style="border-bottom: 1px solid #000; padding: 8px;">
                                        <span t-esc="cco.others_short_comment"/>
                                    </td>
                                </tr>
                            </t>
                        </tbody>
                    </table>

                    <!-- Horizontal Line -->
                    <div style="border-top: 5px solid #000; margin-top: 20px; margin-bottom: 20px;"></div>

                    <table style="width: 100%; margin-top: 20px; margin-bottom: 20px; padding: 20px; border-collapse: collapse;">
                        <tr>
                            <td style="width: 33%; text-align: left; padding: 10px; font-size: 18px;">
                                <strong>Axillary Hair:</strong>
                                <t t-esc="doc.auxillary_hair"/>
                            </td>
                            <td style="width: 33%; text-align: left; padding: 10px; font-size: 18px;">
                                <strong>Pubic Hair:</strong>
                                <t t-esc="doc.pubic_hair"/>
                            </td>
                        </tr>
                        <tr>
                            <td style="text-align: left; padding: 10px; font-size: 18px;">
                                <strong>Testes Vol Right:</strong>
                                <t t-esc="doc.testes_vol_right"/>
                            </td>
                            <td style="text-align: left; padding: 10px; font-size: 18px;">
                                <strong>Testes Vol Left:</strong>
                                <t t-esc="doc.testes_vol_left"/>
                            </td>
                        </tr>
                        <tr>
                            <td style="text-align: left; padding: 10px; font-size: 18px;">
                                <strong>Breast Right:</strong>
                                <t t-esc="doc.breast_vol_right"/>
                            </td>
                            <td style="text-align: left; padding: 10px; font-size: 18px;">
                                <strong>Breast Left:</strong>
                                <t t-esc="doc.breast_vol_left"/>
                            </td>
                        </tr>
                        <tr>
                            <td style="text-align: left; padding: 10px; font-size: 18px;">
                                <strong>Menstruation:</strong>
                                <t t-esc="doc.mensuration_cycle"/>
                            </td>
                            <td style="text-align: left; padding: 10px; font-size: 18px;">
                                <strong>Date of Menarche:</strong>
                                <t t-esc="doc.mensuration_date"/>
                            </td>
                        </tr>
                        <tr>
                            <td style="text-align: left; padding: 10px; font-size: 18px;">
                                <strong>Tanner Stage:</strong>
                                <t t-esc="doc.tanner_stage"/>
                            </td>
                            <td style="text-align: left; padding: 10px; font-size: 18px;">
                                <strong>Genital Length:</strong>
                                <t t-esc="doc.genital_length"/>
                            </td>
                        </tr>                       
                    </table>

                    <!-- Horizontal Line -->
                    <div style="border-top: 1px solid #000; margin-top: 20px; margin-bottom: 20px;"></div>

                    <table style="width: 100%; margin-top: 20px; margin-bottom: 20px; padding: 20px; border-collapse: collapse;">
                        <tr>
                            <td style="width: 33%; text-align: left; padding: 10px; font-size: 18px;">                                
                                <strong>Goitre:</strong>
                                <t t-esc="doc.goiter"/>
                            </td>
                            <td style="width: 33%; text-align: left; padding: 10px; font-size: 18px;">
                                <strong>Lipohypertrophy:</strong>
                                <t t-esc="doc.lipohypertrophy"/> 
                            </td>
                            <td style="width: 33%; text-align: left; padding: 10px; font-size: 18px;">
                                <strong>Acanthosis:</strong>
                                <t t-esc="doc.acanthosis"/> 
                            </td>
                        </tr>
                        <tr>                            
                            <td style="width: 33%; text-align: left; padding: 10px; font-size: 18px;">
                                <strong>Atrophy:</strong>
                                <t t-esc="doc.atrophy"/> 
                            </td>
                            <td style="width: 33%; text-align: left; padding: 10px; font-size: 18px;">
                                <strong>HbA1c:</strong>
                                <t t-esc="doc.hbA1C"/> 
                            </td>
                            <td style="width: 33%; text-align: left; padding: 10px; font-size: 18px;">
                                <strong>Last HbA1c Date:</strong>
                                <t t-esc="doc.last_hbA1c_date"/> 
                            </td>
                        </tr>
                    </table>

                    <div style="border-top: 5px solid #000; margin-top: 30px; margin-bottom: 20px;"></div>
                    <table style="width: 100%; border-collapse: collapse; margin-top: 10px; margin-bottom: 30px;">
                        <thead>
                            <tr>
                                <th style="border-bottom: 2px solid #000; text-align: left; padding: 8px;">Time Frame</th>
                                <th style="border-bottom: 2px solid #000; text-align: left; padding: 8px;">Meal Time</th>
                                <th style="border-bottom: 2px solid #000; text-align: left; padding: 8px;">Insulin Type</th>
                                <th style="border-bottom: 2px solid #000; text-align: left; padding: 8px;">Quantity</th>
                                <th style="border-bottom: 2px solid #000; text-align: left; padding: 8px;">Description</th>
                                <th style="border-bottom: 2px solid #000; text-align: left; padding: 8px;">Insulin Notes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-foreach="doc.insulin_line_ids" t-as="insulin">
                                <tr>
                                    
                                    <td style="border-bottom: 1px solid #000; padding: 8px;">
                                        <span t-esc="insulin.time_frame"/>
                                    </td>
                                    <td style="border-bottom: 1px solid #000; padding: 8px;">
                                        <span t-esc="insulin.meal_time"/>
                                    </td>
                                    <td style="border-bottom: 1px solid #000; padding: 8px;">
                                        <span t-esc="insulin.insulin_type"/>
                                    </td>
                                    
                                    <td style="border-bottom: 1px solid #000; padding: 8px;">
                                        <span t-esc="insulin.quantity"/>
                                    </td>
                                    <td style="border-bottom: 1px solid #000; padding: 8px;">
                                        <span t-esc="insulin.description"/>
                                    </td>
                                    <td style="border-bottom: 1px solid #000; padding: 8px;">
                                        <span t-esc="doc.insulin_notes"/>
                                    </td>
                                </tr>
                            </t>
                        </tbody>
                    </table>

                    <div class="row" style="margin-top: 30px; ">
                        <div class="col-12">
                            <strong>Investigation :</strong> <span t-field="doc.investigation_notes"/>
                        </div>
                    </div>
                    <div class="row" style="margin-top: 30px;">
                        <div class="col-12">
                            <strong>Comments :</strong>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-6">
                            <strong>Clinical Examination :</strong> <span t-field="doc.clinical_examination_notes"/>
                        </div>
                        <div class="col-6">
                            <strong>Tanner Stage:</strong> <span t-field="doc.tanner_notes"/>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-6">
                            <strong>CCO:</strong> <span t-field="doc.cco_notes"/>
                        </div>
                        <div class="col-6">
                            <strong>Insulin Treatment:</strong> <span t-field="doc.insulin_notes"/>
                        </div>
                    </div>
                    <div class="row" style="margin-top: 30px; ">
                        <div class="col-6">
                            <strong>Next Follow Up:</strong> <span t-field="doc.next_follow_up"/>
                        </div>
                        <div class="col-5" style="text-align: right;">
                            <strong>Signature :</strong>
                            <img t-if="doc.primary_physician_id.signature" 
                                t-attf-src="data:image/png;base64,#{doc.primary_physician_id.signature}" 
                                alt="Signature" style="max-width: 150px; max-height: 50px;" />
                        </div>
                    </div>

                </div>
            </t>
        </t>
    </template>


</odoo>